<!DOCTYPE html>
<html>
<head>
    <title>Mirror Links</title>
    <link rel="stylesheet" href="/static/default.css">
</head>
<body>
    <h2>Metadata</h2>
    <strong>Title:</strong> {{ title|e }}<br />
    <strong>Fragment:</strong> {{ fragment_text|e }}<br />
    <strong>Content-Type:</strong> {{ content_type|e }}<br />
    <strong>Clipboard Error:</strong> {{ clipboard_error|e }}<br />
    
    <h2>URL:</h2>
    {% for url in urls %}
        <a href="{{ url }}">{{ url|e }}</a><br />
    {% endfor %}
    
    <h2>Favicon</h2>
    {% if favicon %}
        <img src="{{ favicon }}" width="20" />
        <a href="{{ favicon }}">{{ favicon|e }}</a><br />
    {% endif %}

    <h2>Links</h2>
    {% for link in links %}
        <h3>{{ link['header'] }}</h3>
        {{ link['html'] }}<br />
        {{ link['html']|e }}<br />
        <button class="copy-btn" data-html="{{ link['html']|e }}">Copy</button><br />
    {% endfor %}

  <script>
    // Add click listeners to all copy buttons
    document.querySelectorAll('.copy-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            navigator.clipboard.writeText(btn.dataset.html).then(() => {
                console.log('HTML copied to clipboard');
            });
        });
    });

    // Auto-copy first link on page load
    document.addEventListener('DOMContentLoaded', function() {
        const firstBtn = document.querySelector('.copy-btn');
        if (firstBtn && firstBtn.dataset.html) {
            navigator.clipboard.writeText(firstBtn.dataset.html);
        }
    });
  </script>
</body>
</html>
